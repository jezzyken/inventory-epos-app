"use strict";(self["webpackChunkvue2"]=self["webpackChunkvue2"]||[]).push([[796],{3796:function(t,e,a){a.r(e),a.d(e,{default:function(){return I}});var i=a(7314),s=a(4414),r=a(3449),c=a(2756),l=a(2197),n=a(8184),o=a(2498),m=a(7112),d=function(){var t=this,e=t._self._c;return t.isLoading?t._e():e(r.A,[e(n.A,{staticClass:"pa-5",attrs:{elevation:"1"}},[e(c.A,[e(s.A,{attrs:{cols:"12",md:"3"}},[e(m.A,{attrs:{label:"Name"},model:{value:t.items.name,callback:function(e){t.$set(t.items,"name",e)},expression:"items.name"}})],1),e(s.A,{attrs:{cols:"12",md:"3"}},[e(m.A,{attrs:{label:"Product Code"},model:{value:t.items.productCode,callback:function(e){t.$set(t.items,"productCode",e)},expression:"items.productCode"}})],1),e(s.A,{attrs:{cols:"12",md:"3"}},[e(l.A,{attrs:{label:"Select",items:t.category,"item-text":"name","item-value":"_id"},model:{value:t.items.category,callback:function(e){t.$set(t.items,"category",e)},expression:"items.category"}})],1),e(s.A,{attrs:{cols:"12",md:"3"}},[e(l.A,{attrs:{label:"Select",items:t.brand,"item-text":"name","item-value":"_id"},model:{value:t.items.brand,callback:function(e){t.$set(t.items,"brand",e)},expression:"items.brand"}})],1),e(s.A,{attrs:{cols:"12",md:"2"}},[e(m.A,{attrs:{label:"Critical Limit"},model:{value:t.items.criticalLimit,callback:function(e){t.$set(t.items,"criticalLimit",e)},expression:"items.criticalLimit"}})],1),e(s.A,{attrs:{cols:"12",md:"5"}},[e(m.A,{attrs:{label:"Description"},model:{value:t.items.description,callback:function(e){t.$set(t.items,"description",e)},expression:"items.description"}})],1),e(s.A,{attrs:{cols:"12",md:"5"}},[e(m.A,{attrs:{label:"Image URL"},model:{value:t.items.image,callback:function(e){t.$set(t.items,"image",e)},expression:"items.image"}})],1)],1)],1),e(n.A,{staticClass:"pa-5 mt-5",attrs:{elevation:"1"}},[e(o.A,{scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v("Unit")]),e("th",{staticClass:"text-left"},[t._v("Variant")]),e("th",{staticClass:"text-left"},[t._v("Item Price")]),e("th",{staticClass:"text-left"},[t._v("Sale Price")])])]),e("tbody",t._l(t.items.prices,(function(a,i){return e("tr",{key:i},[e("td",[e(l.A,{attrs:{items:t.unit,label:"Select","item-text":"name","item-value":"_id"},model:{value:a.unit,callback:function(e){t.$set(a,"unit",e)},expression:"price.unit"}})],1),e("td",[e(l.A,{attrs:{items:t.variant,label:"Select","item-text":"name","item-value":"_id"},model:{value:a.variant,callback:function(e){t.$set(a,"variant",e)},expression:"price.variant"}})],1),e("td",[e(m.A,{attrs:{label:"Sale Price"},model:{value:a.itemPrice,callback:function(e){t.$set(a,"itemPrice",e)},expression:"price.itemPrice"}})],1),e("td",[e(m.A,{attrs:{label:"Item Price"},model:{value:a.salePrice,callback:function(e){t.$set(a,"salePrice",e)},expression:"price.salePrice"}})],1)])})),0)]},proxy:!0}],null,!1,3866335151)}),e(c.A,{staticClass:"ma-4",attrs:{justify:"end"}},[e(i.A,{attrs:{dark:"",color:"primary"},on:{click:t.addPrice}},[t._v("Add price")])],1)],1),e(c.A,{staticClass:"ma-0 mt-6",attrs:{justify:"start"}},[e(i.A,{attrs:{dark:"",color:t.pageMode.color},on:{click:t.pageMode.action}},[t._v(t._s(t.pageMode.label))]),e("div",{staticClass:"ma-1"}),e(i.A,[t._v("clear")])],1)],1)},u=[],p=(a(4114),a(5353)),h={props:{mode:String},data(){return{items:{image:"https://media.istockphoto.com/id/173633236/photo/hand-saw.webp?b=1&s=170667a&w=0&k=20&c=fk-bGhRNrB-MPIvOJXcVw9QE4fyXzJfTQeleMFwVXbA=",prices:[{}]},isLoading:!1,category:[],unit:[],variant:[],brand:[]}},computed:{pageMode(){let t={color:"warning",action:this.onUpdateItem,label:"update"};return"add"===this.mode&&(t={color:"primary",action:this.onAddItem,label:"add"}),t}},async created(){this.fetch(),this.$route?.params?.id&&this.initialize()},methods:{...(0,p.i0)({getItemById:"product/getItemById",getItemByProductId:"itemPrice/getItemByProductId",addItem:"product/addItem",updateItem:"product/updateItem",getCategoryItems:"category/getItem",getVariantItems:"variant/getItem",getUnitItems:"unit/getItem",getBrandItems:"brand/getItem"}),async initialize(){this.isLoading=!0;const t=await this.getItemById(this.$route.params.id);this.items={...t.result,brand:t.result.brand._id,category:t.result.category._id,prices:t.result.prices.map((t=>({...t,unit:t.unit._id,variant:t.variant._id})))},this.isLoading=!1},addPrice(){this.items.prices.push({})},async onAddItem(){await this.addItem(this.items),this.$router.push("/product")},async onUpdateItem(){const t={id:this.$route?.params?.id,data:this.items};await this.updateItem(t),this.$router.push("/product")},async fetch(){const t=await this.getCategoryItems(),e=await this.getUnitItems(),a=await this.getBrandItems(),i=await this.getVariantItems();this.category=t.result,this.unit=e.result,this.brand=a.result,this.variant=i.result}}},g=h,b=a(1656),v=(0,b.A)(g,d,u,!1,null,null,null),I=v.exports}}]);
//# sourceMappingURL=796.198ca3ca.js.map