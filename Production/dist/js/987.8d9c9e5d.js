"use strict";(self["webpackChunkvue2"]=self["webpackChunkvue2"]||[]).push([[987],{5987:function(t,e,s){s.r(e),s.d(e,{default:function(){return v}});var a=s(7314),i=s(4414),l=s(3449),o=s(6930),d=s(2756),r=s(2197),c=s(8184),u=s(2498),n=s(7112),p=function(){var t=this,e=t._self._c;return t.isLoading?t._e():e(l.A,["add"===t.mode?e("div",[e(c.A,{staticClass:"pa-5",attrs:{elevation:"1"}},[e(d.A,[e(i.A,{attrs:{cols:"12",md:"6"}},[e(n.A,{attrs:{label:"Date",outlined:""},model:{value:t.items.date,callback:function(e){t.$set(t.items,"date",e)},expression:"items.date"}})],1),e(i.A,{attrs:{cols:"12",md:"6"}},[e(r.A,{attrs:{label:"Supplier",items:t.suppliers,"item-text":"name","return-object":"",outlined:""},model:{value:t.items.supplier,callback:function(e){t.$set(t.items,"supplier",e)},expression:"items.supplier"}})],1),e(i.A,{attrs:{cols:"12",md:"3"}},[e("div",{staticClass:"d-flex"},[e(r.A,{attrs:{label:"Products",items:t.products,"item-text":"name",outlined:"","return-object":""},on:{change:t.onSelectItem},model:{value:t.items.product,callback:function(e){t.$set(t.items,"product",e)},expression:"items.product"}})],1)])],1)],1),e(c.A,{staticClass:"pa-5 mt-5",attrs:{elevation:"1"}},[e(u.A,{scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v("Prooduct")]),e("th",{staticClass:"text-left"},[t._v("Product Code")]),e("th",{staticClass:"text-left"},[t._v("Quantity")]),e("th",{staticClass:"text-left"},[t._v("Supplier")]),e("th",{staticClass:"text-left"},[t._v("Actions")])])]),e("tbody",t._l(t.stocks,(function(s,i){return e("tr",{key:i},[e("td",{staticClass:"pa-5"},[e(n.A,{attrs:{label:"Product",outlined:"","hide-details":"",dense:""},model:{value:s.productName,callback:function(e){t.$set(s,"productName",e)},expression:"stock.productName"}})],1),e("td",[e(n.A,{attrs:{label:"Product Code",outlined:"","hide-details":"",dense:""},model:{value:s.productCode,callback:function(e){t.$set(s,"productCode",e)},expression:"stock.productCode"}})],1),e("td",[e("div",{staticClass:"d-flex justify-center"},[e(a.A,{attrs:{dark:"",color:"primary",small:"",fab:""}},[e(o.A,[t._v("mdi-plus")])],1),e("div",{staticStyle:{width:"75px"}},[e(n.A,{staticClass:"text-center mx-2",attrs:{outlined:"","hide-details":"",dense:""},model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",e)},expression:"stock.quantity"}})],1),e(a.A,{attrs:{dark:"",color:"primary",small:"",fab:""}},[e(o.A,[t._v("mdi-minus")])],1)],1)]),e("td",[e(n.A,{attrs:{label:"Supplier",outlined:"","hide-details":"",dense:""},model:{value:s.supplierName,callback:function(e){t.$set(s,"supplierName",e)},expression:"stock.supplierName"}})],1),e("td",[e(a.A,{attrs:{dark:"",color:"error","x-small":"",fab:""}},[e(o.A,[t._v("mdi-close")])],1)],1)])})),0)]},proxy:!0}],null,!1,1461070972)})],1)],1):e("div",[e(c.A,{staticClass:"pa-5",attrs:{elevation:"1"}},[e(d.A,[e(i.A,{attrs:{cols:"12",md:"6"}},[e(n.A,{attrs:{label:"Date",outlined:""},model:{value:t.items.date,callback:function(e){t.$set(t.items,"date",e)},expression:"items.date"}})],1),e(i.A,{attrs:{cols:"12",md:"6"}},[e(r.A,{attrs:{label:"Supplier",items:t.suppliers,"item-text":"name","return-object":"",outlined:""},model:{value:t.items.supplier,callback:function(e){t.$set(t.items,"supplier",e)},expression:"items.supplier"}})],1),e(i.A,{attrs:{cols:"12",md:"6"}},[e("div",{staticClass:"d-flex"},[e(r.A,{attrs:{label:"Products",items:t.products,"item-text":"name",outlined:"","return-object":""},on:{change:t.onSelectItem},model:{value:t.items.product,callback:function(e){t.$set(t.items,"product",e)},expression:"items.product"}})],1)]),e(i.A,{attrs:{cols:"12",md:"6"}},[e("div",{staticClass:"d-flex"},[e(n.A,{attrs:{label:"Quantity",outlined:""},model:{value:t.items.quantity,callback:function(e){t.$set(t.items,"quantity",e)},expression:"items.quantity"}})],1)])],1)],1)],1),e(d.A,{staticClass:"ma-0 mt-6",attrs:{justify:"start"}},[e(a.A,{attrs:{dark:"",color:t.buttonState.color},on:{click:t.buttonState.action}},[t._v(t._s(t.buttonState.label))]),e("div",{staticClass:"ma-1"}),e(a.A,[t._v("clear")])],1)],1)},m=[],h=(s(4114),s(5353)),b={props:{mode:String},data(){return{items:{stocks:[]},isLoading:!1,category:[],unit:[],variant:[],brand:[],products:[],suppliers:[],stocks:[]}},computed:{buttonState(){let t={color:"warning",action:this.onUpdateItem,label:"update"};return"add"===this.mode&&(t={color:"primary",action:this.onAddItem,label:"add"}),t}},async created(){this.fetch(),this.$route?.params?.id&&this.initialize()},methods:{...(0,h.i0)({getProductItems:"product/getItem",addItem:"stock/addItem",getSupplierItems:"supplier/getItem",getStockById:"stock/getItemById",updateItem:"stock/updateItem"}),async initialize(){this.isLoading=!0;const t=await this.getStockById(this.$route.params.id);console.log(t),this.items=t.result,this.isLoading=!1},onSelectItem(){const t={product:this.items.product._id,supplier:this.items.supplier._id,productName:this.items.product.name,supplierName:this.items.supplier.name,productCode:this.items.product.productCode};this.stocks.push(t)},async onAddItem(){const t=this.stocks.map((t=>({...t,date:this.items.date||new Date})));await this.addItem(t),this.$router.push("/stock")},async onUpdateItem(){const t={id:this.$route?.params?.id,data:{date:this.items.date,product:this.items.product._id,supplier:this.items.supplier._id,quantity:this.items.quantity}};await this.updateItem(t),this.$router.push("/stock")},async fetch(){const t=await this.getSupplierItems(),e=await this.getProductItems();this.suppliers=t.result,this.products=e.result}}},f=b,k=s(1656),A=(0,k.A)(f,p,m,!1,null,"67e3d9b2",null),v=A.exports}}]);
//# sourceMappingURL=987.8d9c9e5d.js.map