"use strict";(self["webpackChunkvue2"]=self["webpackChunkvue2"]||[]).push([[836],{453:function(e,t,s){s.r(t),s.d(t,{default:function(){return y}});var i=s(7314),a=s(1484),d=s(2938),l=s(4414),o=s(3449),n=s(4245),c=s(9991),r=s(9483),m=s(2756),u=s(1034),h=s(7112),I=s(198),p=s(2367),x=function(){var e=this,t=e._self._c;return t(o.A,[t(n.A,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,loading:e.isLoading,"sort-by":"calories"},scopedSlots:e._u([{key:"top",fn:function(){return[t(I.A,{attrs:{flat:""}},[t(p.sw,[e._v("Stock")]),t(r.A,{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t(u.A),t(c.A,{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function({}){return[t(i.A,{staticClass:"mb-2",attrs:{color:"primary",dark:"",to:{name:"AddStock"}}},[e._v(" Add ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(a.A,[t(d.ri,[t("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),t(d.OQ,[t(o.A,[t(m.A,[t(l.A,{attrs:{cols:"12"}},[t(h.A,{attrs:{label:"Name"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1)],1),t(m.A,[t(l.A,{attrs:{cols:"12"}},[t(h.A,{attrs:{label:"Company"},model:{value:e.editedItem.company,callback:function(t){e.$set(e.editedItem,"company",t)},expression:"editedItem.company"}})],1)],1),t(m.A,[t(l.A,{attrs:{cols:"12"}},[t(h.A,{attrs:{label:"Email"},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1)],1),t(m.A,[t(l.A,{attrs:{cols:"12"}},[t(h.A,{attrs:{label:"Contact No"},model:{value:e.editedItem.contactNo,callback:function(t){e.$set(e.editedItem,"contactNo",t)},expression:"editedItem.contactNo"}})],1)],1),t(m.A,[t(l.A,{attrs:{cols:"12"}},[t(h.A,{attrs:{label:"Address"},model:{value:e.editedItem.address,callback:function(t){e.$set(e.editedItem,"address",t)},expression:"editedItem.address"}})],1)],1)],1)],1),t(d.SL,[t(u.A),t(i.A,{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" Cancel ")]),t(i.A,{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v(" Save ")])],1)],1)],1),t(c.A,{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[t(a.A,[t(d.ri,{staticClass:"text-h5"},[e._v("Are you sure you want to delete this item?")]),t(d.SL,[t(u.A),t(i.A,{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancel")]),t(i.A,{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("OK")]),t(u.A)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:s}){return[t(i.A,{attrs:{"x-small":"",color:"warning",to:{name:"EditStock",params:{id:s._id}}}},[e._v(" edit ")]),t("span",{staticClass:"mr-1"}),t(i.A,{attrs:{"x-small":"",color:"error",dark:""},on:{click:function(t){return e.deleteItem(s)}}},[e._v(" delete ")])]}},{key:"no-data",fn:function(){return[t(i.A,{attrs:{color:"primary"},on:{click:e.initialize}},[e._v(" Reset ")])]},proxy:!0}],null,!0)})],1)},A=[],k=(s(4114),s(5353)),v={data:()=>({dialog:!1,dialogDelete:!1,headers:[{text:"Date",align:"start",sortable:!1,value:"date"},{text:"Product Code",align:"start",sortable:!1,value:"product.productCode"},{text:"Product",align:"start",value:"product.name"},{text:"Supplier",align:"start",value:"supplier.name"},{text:"Quantity",align:"start",value:"quantity"},{text:"Actions",value:"actions",sortable:!1}],desserts:[],editedIndex:-1,editedItem:{name:"",company:"",email:"",contactNo:"",address:""},defaultItem:{name:"",company:"",email:"",contactNo:"",address:""},itemId:null,isLoading:!1}),computed:{formTitle(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog(e){e||this.close()},dialogDelete(e){e||this.closeDelete()}},created(){this.initialize(),console.log("initialized back")},methods:{...(0,k.i0)({getItems:"stock/getItem",addItem:"stock/addItem",removeItem:"stock/deleteItem",updateItem:"stock/updateItem"}),async initialize(){this.isLoading=!0;const e=await this.getItems();this.desserts=e.result,this.isLoading=!1},editItem(e){this.editedIndex=this.desserts.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem(e){this.editedIndex=this.desserts.indexOf(e),this.itemId=e._id,this.editedItem=Object.assign({},e),this.dialogDelete=!0},async deleteItemConfirm(){await this.removeItem(this.itemId),this.desserts.splice(this.editedIndex,1),this.closeDelete()},close(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},closeDelete(){this.dialogDelete=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},async save(){this.editedIndex>-1?(Object.assign(this.desserts[this.editedIndex],this.editedItem),await this.updateItem(this.editedItem)):(this.desserts.push(this.editedItem),await this.addItem(this.editedItem)),this.close()}}},g=v,f=s(1656),b=(0,f.A)(g,x,A,!1,null,null,null),y=b.exports}}]);
//# sourceMappingURL=836.3df7d741.js.map